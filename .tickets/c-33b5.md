---
id: c-33b5
status: closed
deps: []
created: 2026-01-03T18:48:20Z
type: task
priority: 2
assignee: JR Tipton
---
# Run tests before merge, send failures back to agent

Gate merges on passing tests. When agent outputs DONE: 1) Auto-detect test command (pytest, npm test, cargo test, make test, go test based on project files), 2) Run tests in agent's worktree, 3) If pass → proceed with merge, 4) If fail → feed test output back to agent as next step prompt and continue stepping. Add detect_test_command() and run_tests_in_worktree() functions to runner.py. Modify complete_task() flow to run tests first.

